{% extends "base.html" %}
{% block title %}Dashboard Cliente | Freelancer Manager Pro{% endblock %}

{% block content %}
<section class="py-20 bg-white px-4">
  <div class="max-w-7xl mx-auto">

    <!-- Header Dashboard -->
    <div class="flex flex-col md:flex-row md:items-center md:justify-between mb-12">
      <h1 class="text-3xl font-bold text-[#1e3a8a]">Benvenuto {{ user.first_name }}!</h1>
      <a href="{% url 'cliente-update' cliente.pk %}" class="mt-4 md:mt-0 inline-block bg-green-400 text-white px-6 py-2 rounded hover:bg-green-500 transition font-semibold">✏️ Modifica Dati</a>
    </div>

    <!-- Box Dati Cliente + Box Link Ticket -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-12">
      <!-- Dati Cliente -->
      <div class="bg-gray-100 p-6 rounded shadow max-w-xl">
        <h2 class="text-2xl font-bold text-[#1e3a8a] mb-4">I tuoi Dati</h2>
        <ul class="text-gray-700 space-y-2">
          <li><strong>Email:</strong> {{ cliente.email }}</li>
          <li><strong>Azienda:</strong> {{ cliente.azienda }}</li>
          <li><strong>Telefono:</strong> {{ cliente.telefono }}</li>
          <li><strong>Indirizzo:</strong> {{ cliente.indirizzo }}</li>
        </ul>
      </div>

      <!-- Box Azione -->
      <div class="bg-gray-100 p-6 rounded shadow flex flex-col justify-center items-center">
        <h2 class="text-xl font-bold text-[#1e3a8a] mb-4 text-center">Serve aiuto?</h2>
        <p class="text-gray-700 mb-6 text-center">Apri un ticket per ricevere supporto rapido dal nostro team.</p>
        <a href="#" class="bg-green-400 text-white px-6 py-3 rounded hover:bg-green-500 transition font-semibold">➕ Apri un Nuovo Ticket</a>
      </div>
    </div>

    <!-- Statistiche Progetti -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-12">
      <div class="bg-gray-100 p-6 rounded shadow text-center">
        <p class="text-4xl font-bold text-green-500">{{ totale_progetti }}</p>
        <p class="text-[#1e3a8a] font-semibold">Progetti Totali</p>
      </div>
      <div class="bg-gray-100 p-6 rounded shadow text-center">
        <p class="text-4xl font-bold text-green-500">{{ in_corso }}</p>
        <p class="text-[#1e3a8a] font-semibold">In Corso</p>
      </div>
      <div class="bg-gray-100 p-6 rounded shadow text-center">
        <p class="text-4xl font-bold text-green-500">{{ completati }}</p>
        <p class="text-[#1e3a8a] font-semibold">Completati</p>
      </div>
    </div>

    <!-- Tabella Progetti -->
    <h2 class="text-2xl font-bold text-[#1e3a8a] mb-4">I tuoi Progetti</h2>
    <div class="bg-gray-100 p-4 rounded shadow overflow-x-auto mb-12">
      <table class="min-w-full">
        <thead>
          <tr class="text-left text-[#1e3a8a]">
            <th class="p-2">Nome</th>
            <th class="p-2">Stato</th>
            <th class="p-2">Budget</th>
            <th class="p-2">Scadenza</th>
          </tr>
        </thead>
        <tbody>
          {% for progetto in progetti %}
          <tr class="border-t border-gray-200">
            <td class="p-2">{{ progetto.nome }}</td>
            <td class="p-2">
              {% if progetto.stato == 'in_attesa' %}
                <span class="bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-sm">In Attesa</span>
              {% elif progetto.stato == 'in_corso' %}
                <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded text-sm">In Corso</span>
              {% else %}
                <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-sm">Completato</span>
              {% endif %}
            </td>
            <td class="p-2">{{ progetto.budget }} €</td>
            <td class="p-2">{{ progetto.data_scadenza|date:"d/m/Y" }}</td>
          </tr>
          {% empty %}
          <tr><td colspan="4" class="p-2 text-gray-500">Nessun progetto disponibile.</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

  </div>
</section>
{% endblock %}


